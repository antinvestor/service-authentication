{{ define "title"}}Verify Your Contact{{ end }}

{{ define "subtitle" }}
<p>We've sent a verification code to your contact</p>
{{ end }}

{{define "content"}}
<div class="verification-container">

    {{if .error}}
    <div class="alert alert-error" role="alert">
        <svg class="alert-icon" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
        </svg>
        <span>{{ .error }}</span>
    </div>
    {{end}}

    <form method="post" action="/s/login/post" class="verification-form" id="verificationForm">
        <input type="hidden" name="login_event_id" value="{{ .login_event_id }}">
        <input type="hidden" name="contact_type" value="{{ .contact_type }}">

        <div class="form-group">
            <label for="profile_name">
                Full Name
                <span class="required-indicator" aria-hidden="true">*</span>
            </label>
            <input
                type="text"
                id="profile_name"
                name="profile_name"
                placeholder="Enter your full name"
                value="{{ .profile_name }}"
                required
                autocomplete="name"
                aria-required="true"
            >
        </div>

        <div class="form-group">
            <label for="verification_code">
                Verification Code
                <span class="required-indicator" aria-hidden="true">*</span>
            </label>
            <input
                type="text"
                id="verification_code"
                name="verification_code"
                placeholder="Enter the 6-character code"
                maxlength="6"
                pattern="[a-zA-Z0-9]{6}"
                required
                autocomplete="one-time-code"
                class="verification-input"
                aria-describedby="code-help"
                aria-required="true"
            >
            <small id="code-help" class="form-help">
                {{if eq .contact_type "CONTACT_TYPE_EMAIL"}}Check your email for the verification code
                {{else if eq .contact_type "CONTACT_TYPE_PHONE"}}Check your phone for the verification code
                {{else if eq .contact_type "EMAIL"}}Check your email for the verification code
                {{else if eq .contact_type "PHONE"}}Check your phone for the verification code
                {{else}}Check your email or phone for the verification code
                {{end}}
            </small>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn-primary" id="verifyBtn">
                <span>Verify & Continue</span>
            </button>
        </div>
    </form>

    <div class="verification-footer">
        <p>
            Didn't receive the code?
            <button type="button" id="resendBtn" class="btn-link" onclick="resendCode()">
                Resend code
            </button>
        </p>
        <p class="mt-3">
            <a href="/s/login?login_challenge={{ .login_challenge }}" class="btn-link-secondary">
                Use a different contact
            </a>
        </p>
    </div>

    <div id="resendTimer" class="resend-timer" style="display: none;">
        <span>You can resend the code in <strong id="countdown">60</strong> seconds</span>
    </div>
</div>
{{end}}
